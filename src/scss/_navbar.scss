//
// Navbar
//

.navbar {
  > .container {
    // TODO remove this after upgrading Bootstrap to v4 beta
    // Bugfix from BS4 alpha-6 that causes inner navbar contents within
    // .container's to not span the full width of the navbar
    @include media-breakpoint-down(nth(map-keys($grid-breakpoints), 1)) {
      margin-left: 0;
      margin-right: 0;
    }

    // TODO remove this after upgrading Bootstrap to v4 beta
    // Bugfix from Bootstrap alpha that results in extra space between
    // .navbar-toggler and a surrounding .container in a navbar
    .navbar-toggler-left {
      @include media-breakpoint-down(nth(map-keys($grid-breakpoints), 1)) {
        left: 0;
      }
    }

    // TODO remove this after upgrading Bootstrap to v4 beta
    // Bugfix from Bootstrap alpha that results in extra space between
    // .navbar-toggler and a surrounding .container in a navbar
    .navbar-toggler-right {
      @include media-breakpoint-down(nth(map-keys($grid-breakpoints), 1)) {
        right: 0;
      }
    }
  }

  // Allow padding around forms within navbars to be adjusted
  .form-inline {
    padding-bottom: $navbar-form-inline-padding-y;
    padding-top: $navbar-form-inline-padding-y;
  }
}


//
// Make things behave the way we expect them to--vertical centering of
// supported inner navbar items
//

.navbar-brand,
.navbar-text,
.navbar-nav .nav-link,
.navbar .form-inline {
  align-items: center;
  display: flex;
}


//
// Navbar brand
//

.navbar-brand {
  // Apply bolding
  font-weight: bold;
  // Allow customization of space between .navbar-brand and other navbar items
  margin-right: $navbar-brand-margin-right;
  // Fix where Bootstrap doesn't properly utilize $navbar-brand-padding-y
  padding-bottom: $navbar-brand-padding-y;
  padding-top: $navbar-brand-padding-y;
}


//
// Navbar nav
//

.navbar-nav {
  .nav-link {
    // Mimic .btn hover transitions
    @include transition($btn-transition);

    font-size: $navbar-nav-link-font-size;
    font-weight: bold;
    letter-spacing: $letter-spacing-base;
    line-height: $navbar-nav-link-line-height;
    padding: $navbar-nav-link-padding-y $navbar-nav-link-padding-x;
    text-transform: uppercase;

    &:focus,
    &.focus {
      box-shadow: $navbar-link-focus-box-shadow;
      outline: 0;
    }
  }
}


//
// Responsive navbar
//

// Button for toggling the navbar when in its collapsed state
.navbar-toggler {
  border-width: $navbar-toggler-border-width;
  margin-bottom: $navbar-toggler-margin-y;
  margin-top: $navbar-toggler-margin-y;
}

// Custom class for descriptive text within .navbar-toggler
.navbar-toggler-text {
  display: inline-block;
  font-size: $navbar-toggler-text-font-size;
  text-transform: uppercase;
  vertical-align: middle;
}

// Hamburger icon within toggle button
.navbar-toggler-icon {
  // Allow toggler icon dimensions to be configurable (Bootstrap assignes fixed
  // em values here)
  height: $navbar-toggler-icon-height;
  width: $navbar-toggler-icon-width;
}


// Generate series of `.navbar-toggleable-*` responsive classes for configuring
// where your navbar collapses.
.navbar-toggleable {
  @each $breakpoint in map-keys($grid-breakpoints) {
    $next: breakpoint-next($breakpoint, $grid-breakpoints);
    $infix: breakpoint-infix($breakpoint, $grid-breakpoints);

    &#{$infix} {
      .navbar-nav .nav-link {
        @include media-breakpoint-down($breakpoint) {
          // Allow customizable padding specific to collapsed navbar
          padding: $navbar-collapsed-nav-link-padding-y $navbar-collapsed-nav-link-padding-x;
        }

        @include media-breakpoint-up($next) {
          // Force nav link hover states to always consume 100% of the navbar height,
          // but only when the navbar is not collapsed
          height: 100%;
          // Override fixed left/right padding values set by Bootstrap.  Reset overridden
          // vertical padding values set above.
          padding: $navbar-nav-link-padding-y $navbar-nav-link-padding-x;
        }
      }

      > .container .navbar-brand {
        @include media-breakpoint-down($breakpoint) {
          // Fixed left padding needs to be added here to match up with
          // grid gutters
          padding-left: ($grid-gutter-width-base / 2);
        }

        @include media-breakpoint-down(nth(map-keys($grid-breakpoints), 1)) {
          // Unset above override at -xs
          padding-left: 0;
        }
      }

      .navbar-collapse {
        &.collapse.show,
        &.collapsing {
          @include media-breakpoint-down($breakpoint) {
            border-top: 1px solid;
          }

          @include media-breakpoint-up($next) {
            border-top: 0 solid transparent;
          }
        }
      }
    }
  }
}


//
// Navbar themes
//

.navbar-light,
.navbar-inverse {
  .navbar-nav {
    .nav-link.disabled {
      &:hover,
      &:focus {
        background-color: transparent;
      }
    }
  }
}

// Dark links against a light background
.navbar-light {
  // Primary color-specific overrides
  &.bg-primary {
    .navbar-nav {
      .nav-link {
        @include hover-focus {
          color: $white;

          &.dropdown-toggle::after {
            border-top-color: $navbar-inverse-dropdown-caret-border;
          }
        }
      }

      .show > .nav-link,
      .open > .nav-link,
      .active > .nav-link,
      .nav-link.open,
      .nav-link:hover,
      .nav-link.active,
      .nav-link:active {
        color: $white;
      }

      .show > .nav-link.dropdown-toggle::after {
        border-top-color: $white;
      }
    }
  }

  // Base light navbar styles
  .navbar-brand {
    // Allow brand hover state color to be modified separately from
    // other link colors
    @include hover-focus {
      color: $navbar-light-brand-hover-color;
    }
  }

  .navbar-nav {
    .dropdown-toggle::after {
      border-top-color: $navbar-light-dropdown-caret-border;
    }

    .nav-link {
      @include hover-focus {
        background-color: $navbar-light-hover-bg-color;
      }
    }

    .show > .nav-link,
    .open > .nav-link,
    .active > .nav-link,
    .nav-link.open,
    .nav-link:hover,
    .nav-link.active,
    .nav-link:active {
      background-color: $navbar-light-hover-bg-color;
    }

    .show > .nav-link.dropdown-toggle::after {
      border-top-color: $navbar-light-hover-color;
    }
  }

  .navbar-toggler {
    &:not(.collapsed) {
      background-color: $navbar-light-toggler-border;

      .navbar-toggler-text {
        color: $navbar-inverse-hover-color; // intentionally using -inverse variable here
      }

      .navbar-toggler-icon {
        background-image: $navbar-inverse-toggler-bg; // intentionally using -inverse variable here
      }
    }
  }
}

// White links against a dark background
.navbar-inverse {
  .navbar-brand {
    // Allow brand hover state color to be modified separately from
    // other link colors
    @include hover-focus {
      color: $navbar-inverse-brand-hover-color;
    }
  }

  .navbar-nav {
    .dropdown-toggle::after {
      border-top-color: $navbar-inverse-dropdown-caret-border;
    }

    .nav-link {
      @include hover-focus {
        background-color: $navbar-inverse-hover-bg-color;
      }
    }

    .show > .nav-link,
    .open > .nav-link,
    .active > .nav-link,
    .nav-link.open,
    .nav-link:hover,
    .nav-link.active,
    .nav-link:active {
      background-color: $navbar-inverse-hover-bg-color;
    }

    .dropdown.show .dropdown-toggle::after {
      border-top-color: $navbar-inverse-hover-color;
    }
  }

  .navbar-toggler {
    &:not(.collapsed) {
      background-color: $navbar-inverse-toggler-border;

      .navbar-toggler-text {
        color: $navbar-light-hover-color; // intentionally using -light variable here
      }

      .navbar-toggler-icon {
        background-image: $navbar-light-toggler-bg; // intentionally using -light variable here
      }
    }
  }
}
